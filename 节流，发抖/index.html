<!--
 * @Description: 
 * @Autor: 吕殿朝
 * @Date: 2020-07-29 10:34:48
 * @LastEditors: 吕殿朝
 * @LastEditTime: 2020-07-29 17:23:07
-->
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=script, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <div id="content"
    style="height:150px;line-height:150px;text-align:center; color: #fff;background-color:#ccc;font-size:80px;"></div>
  <script>
    window.onload = function () {
      let num = 1;
      let content = document.getElementById('content');

      function count() {
        content.innerHTML = num++;
      };
      content.onmousemove = debounce(count, 500);
      //防抖
      function debounce(func, wait) {
        let timer;
        return function () {
          let context = this; //this指向
          let args = arguments; //arguments中存储e
          if (timer) {
            clearTimeout(timer)
          }
          timer = setTimeout(() => {
            func.apply(this, args)
          }, wait);
        }
      }
      //立即执行
      function debounce2(func, wait) {
        let timer;
        return function () {
          let context = this;
          let args = arguments;
          if (timer) clearTimeout(timer);
          let callNow = !timer;

          timer = setTimeout(() => {
            timer = null
          }, wait);

          if (callNow) func.apply(context, args)
        }
      }
    }
  </script>
</body>

</html>